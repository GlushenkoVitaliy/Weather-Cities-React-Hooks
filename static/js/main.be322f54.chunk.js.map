{"version":3,"sources":["serviseWeatherApi/ServiceWeatherApi.js","components/WeatherToday/WeatherToday.js","components/ChangeCity/ChangeCity.js","components/ErrorMessage/ErrorMessage.js","components/App/App.js","index.js"],"names":["ServiseWeatherApi","url","fetch","res","ok","Error","status","json","city","this","getResource","dataWeather","_transformData","lat","lon","data","date","Date","dateToday","moment","format","toLocaleUpperCase","name","temperatureDay","Math","round","main","temp","wind","speed","WeatherToday","newCity","onHasError","serviceWeatherApi","ServiceWeatherApi","useState","weatherCity","setWeatherSity","useEffect","getLocationCity","getDataByCity","navigator","geolocation","getCurrentPosition","position","getDataByCord","coords","latitude","longitude","onError","err","getDataByCordinates","then","catch","getDataByCityName","className","ChangeCity","onChangeCity","newCityName","setNewCityName","onSubmit","e","preventDefault","type","onChange","target","value","placeholder","ErrorMessage","App","setNewCity","error","setError","errorMessage","ReactDOM","render","document","getElementById"],"mappings":"2TAEqBA,E,6IAECC,G,uFAEIC,MAAMD,G,WAAlBE,E,QAEGC,G,sBACC,IAAIC,MAAM,0BAAmBJ,GAAnB,qBACEE,EAAIG,S,uBAEbH,EAAII,O,2NAGGC,G,uFACMC,KAAKC,YAAL,4DAAsEF,EAAtE,yD,cAApBG,E,yBACCF,KAAKG,eAAeD,I,0LAGLE,EAAKC,G,uFACDL,KAAKC,YAAL,8DAAwEG,EAAxE,gBAAmFC,EAAnF,yD,cAApBH,E,yBACCF,KAAKG,eAAeD,I,8IAIhBI,GACX,IAAIC,EAAO,IAAIC,KACXC,EAAYC,IAAOH,GAAMI,OAAO,eAAeC,oBACnD,MAAQ,CACNb,KAAMO,EAAKO,KACXC,eAAgBC,KAAKC,MAAMV,EAAKW,KAAKC,MACrCC,KAAMJ,KAAKC,MAAMV,EAAKa,KAAKC,OAC3Bb,KAAME,O,KCoCDY,G,MA9DM,SAAC,GAA6B,IAA3BC,EAA0B,EAA1BA,QAASC,EAAiB,EAAjBA,WAEzBC,EAAoB,IAAIC,EAFkB,EAIVC,mBAAU,IAJA,mBAIzCC,EAJyC,KAI5BC,EAJ4B,KAMhDC,qBAAU,WAAQC,MAAoB,IAEtCD,qBAAU,WACQ,OAAZP,GACFS,EAAcT,KAEX,CAACA,IAER,IAAMQ,EAAkB,WACtBE,UAAUC,YAAYC,oBAAmB,SAAAC,GAAQ,OAE/CC,EAAcD,EAASE,OAAOC,SAAUH,EAASE,OAAOE,eAKtDC,EAAU,SAACC,GACflB,EAAWkB,IAGPL,EAAgB,SAACE,EAAUC,GAC/Bf,EACGkB,oBAAoBJ,EAAUC,GAC9BI,MAAK,SAAArC,GACJsB,EAAetB,MAEhBsC,MAAMJ,IAGLT,EAAgB,SAACT,GACrBE,EACGqB,kBAAkBvB,GAClBqB,MAAK,SAAArC,GACJsB,EAAetB,MAEhBsC,MAAMJ,IAIHzC,EAAqC4B,EAArC5B,KAAMQ,EAA+BoB,EAA/BpB,KAAMO,EAAyBa,EAAzBb,eAAgBK,EAASQ,EAATR,KAEpC,OACE,yBAAK2B,UAAU,iBAEb,yBAAKA,UAAU,QACb,4BAAK/C,IAEP,yBAAK+C,UAAU,QAAQvC,GACvB,yBAAKuC,UAAU,QAAf,eAAmChC,EAAnC,UACA,yBAAKgC,UAAU,QAAf,QAA4B3B,EAA5B,WC1Ba4B,G,MAhCA,SAAC,GAAuB,IAApBC,EAAmB,EAAnBA,aAAmB,EAEEtB,mBAAU,IAFZ,mBAE9BuB,EAF8B,KAEjBC,EAFiB,KAclC,OACI,yBAAKJ,UAAU,eACX,6CACA,0BAAMA,UAAU,gBACdK,SAVG,SAACC,GACdA,EAAEC,iBACFL,EAAaC,GACbC,EAAe,MASP,2BAAOI,KAAK,OACLR,UAAU,eACVS,SAlBG,SAACH,GACnBF,EAAeE,EAAEI,OAAOC,QAkBTC,YAAY,gBACZD,MAAOR,IACd,4BACIH,UAAU,qBADd,mBCdDa,G,MAXO,WAElB,OACI,yBAAKb,UAAU,iBACX,iEACA,0ECuCGc,G,MAxCH,WAAO,IAAD,EAEkBlC,mBAAS,MAF3B,mBAENJ,EAFM,KAEGuC,EAFH,OAGcnC,oBAAS,GAHvB,mBAGNoC,EAHM,KAGCC,EAHD,KAmBRC,EAAeF,EAAQ,kBAAC,EAAD,MAAmB,KAEhD,OACI,yBAAKhB,UAAU,eACX,wBAAIA,UAAU,UAAd,gBACC,yBAAKA,UAAU,kBACZ,kBAAC,EAAD,CAAaxB,QAASA,EACTC,WAfT,SAACkB,GACbsB,GAAS,MAgBD,kBAAC,EAAD,CAAYf,aAvBD,SAACC,GACpBY,EAAWZ,GACXc,GAAS,MAwBAC,MClCjBC,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,W","file":"static/js/main.be322f54.chunk.js","sourcesContent":["import moment from 'moment';\r\n\r\nexport default class ServiseWeatherApi {\r\n\r\n    async getResource(url) {\r\n        \r\n        const res = await fetch(url);\r\n\r\n        if (!res.ok) {\r\n            throw new Error(`Could not fetch ${url}` + \r\n                `, received ${res.status}`)\r\n        }\r\n        return await res.json();\r\n    }\r\n\r\n    async getDataByCityName(city) {\r\n        const dataWeather = await this.getResource(`https://api.openweathermap.org/data/2.5/weather?q=${city}&units=metric&appid=6aebc52b238b091e301f34ff37af58c0`);\r\n        return this._transformData(dataWeather)\r\n    }\r\n\r\n    async getDataByCordinates(lat, lon) {\r\n        const dataWeather = await this.getResource(`https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&units=metric&appid=6aebc52b238b091e301f34ff37af58c0`);\r\n        return this._transformData(dataWeather)\r\n\r\n    }\r\n\r\n    _transformData(data) {\r\n        let date = new Date();\r\n        let dateToday = moment(date).format('dddd, MMM M').toLocaleUpperCase(); \r\n        return ({\r\n          city: data.name,\r\n          temperatureDay: Math.round(data.main.temp),\r\n          wind: Math.round(data.wind.speed),\r\n          date: dateToday\r\n        })\r\n    }\r\n}\r\n\r\n\r\n","import React, { useState, useEffect } from \"react\";\r\n\r\nimport ServiceWeatherApi from \"../../serviseWeatherApi/ServiceWeatherApi\";\r\n\r\n\r\nimport \"./WeatherToday.css\";\r\n\r\nconst WeatherToday = ({ newCity, onHasError }) => {\r\n  \r\n  const serviceWeatherApi = new ServiceWeatherApi();\r\n  \r\n  const [weatherCity, setWeatherSity] = useState( {} );\r\n\r\n  useEffect(() => { getLocationCity()}, []);\r\n  \r\n  useEffect(() => { \r\n    if (newCity !== null) {\r\n      getDataByCity(newCity); \r\n    }\r\n      }, [newCity]);\r\n\r\n  const getLocationCity = () => {\r\n    navigator.geolocation.getCurrentPosition(position =>\r\n      \r\n      getDataByCord(position.coords.latitude, position.coords.longitude)\r\n    );\r\n    \r\n  }\r\n\r\n  const onError = (err) => {\r\n    onHasError(err)\r\n  }\r\n\r\n  const getDataByCord = (latitude, longitude) => {\r\n    serviceWeatherApi\r\n      .getDataByCordinates(latitude, longitude)\r\n      .then(data => {\r\n        setWeatherSity(data)\r\n      })\r\n      .catch(onError);\r\n  }\r\n\r\n  const getDataByCity = (newCity) => {\r\n    serviceWeatherApi\r\n      .getDataByCityName(newCity)\r\n      .then(data => {\r\n        setWeatherSity(data)\r\n      })\r\n      .catch(onError);\r\n      \r\n  }\r\n\r\n  const { city, date, temperatureDay, wind } = weatherCity;\r\n\r\n  return (\r\n    <div className=\"weather-today\">\r\n        \r\n      <div className=\"city\">\r\n        <h2>{city}</h2>\r\n      </div>\r\n      <div className=\"date\">{date}</div>\r\n      <div className=\"temp\">Temperature {temperatureDay} Â°C</div>\r\n      <div className=\"wind\">Wind {wind} m/s</div>\r\n       \r\n    </div>\r\n  );\r\n  \r\n};\r\n\r\nexport default WeatherToday;\r\n","import React, { useState } from 'react';\r\n\r\nimport './ChangeCity.css';\r\n\r\nconst ChangeCity = ( { onChangeCity }) => {\r\n\r\n    const [ newCityName, setNewCityName ] = useState( '' );\r\n\r\n    const onLabelChange = (e) => {\r\n        setNewCityName(e.target.value)\r\n    }\r\n\r\n    const onSubmit = (e) => {\r\n        e.preventDefault();\r\n        onChangeCity(newCityName);\r\n        setNewCityName('')\r\n    }\r\n\r\n        return (\r\n            <div className='change-city'>\r\n                <p>Not your City?</p>\r\n                <form className='item-add-form'\r\n                  onSubmit={onSubmit}\r\n                  >\r\n                <input type='text'\r\n                       className='form-control'\r\n                       onChange={onLabelChange}\r\n                       placeholder='Write it here'\r\n                       value={newCityName} />\r\n                <button \r\n                    className='btn btn-secondary'>Change City</button>\r\n            </form>\r\n            </div>\r\n        )\r\n    };\r\n\r\n    export default ChangeCity;","import React from 'react';\r\n\r\nimport './ErrorMessage.css';\r\n\r\n const ErrorMessage = () => {\r\n\r\n    return (\r\n        <div className='error-message'>\r\n            <span>We couldn`t determine the city!</span>\r\n            <span>Verify the spelling of the city name.</span>\r\n        </div>\r\n    )\r\n    \r\n};\r\n\r\nexport default ErrorMessage;","import React, { useState } from 'react';\r\n\r\nimport WeaterToday from '../WeatherToday/WeatherToday';\r\nimport ChangeCity from '../ChangeCity/ChangeCity';\r\nimport ErrorMessage from '../ErrorMessage/ErrorMessage';\r\n\r\nimport './App.css';\r\n\r\nconst App = () => {\r\n\r\n    const [ newCity, setNewCity ] = useState(null);\r\n    const [ error, setError ] = useState(false);\r\n\r\n    const changeCityName = (newCityName) => {\r\n        setNewCity(newCityName);\r\n        setError(false);\r\n           \r\n    }\r\n\r\n    const onError = (err) => {\r\n        setError(true)\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    const errorMessage = error ? <ErrorMessage /> : null; \r\n\r\n    return (\r\n        <div className='weather-app'>\r\n            <h1 className='header'>Weather City</h1>\r\n             <div className='weather-window'>\r\n                <WeaterToday newCity={newCity}\r\n                             onHasError={onError}\r\n                />\r\n                <ChangeCity onChangeCity={changeCityName}\r\n                />\r\n                    \r\n                {errorMessage}    \r\n\r\n             </div>\r\n                \r\n         </div>\r\n    )\r\n    \r\n};\r\n\r\nexport default App;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport App from './components/App/App'\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}